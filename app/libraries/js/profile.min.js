updateChatTimes=function(){$.each($(".chat_time"),function(a,b){$(this).text(moment.utc($(this).attr("id")).fromNow())});$.each($(".interaction_time"),function(a,b){$(this).text(moment.utc($(this).attr("id")).fromNow())});$.each($(".time"),function(a,b){$(this).text(moment.utc($(this).attr("id")).fromNow())});if($(".last_login").length){$(".last_login").html("<b>Last login: </b>"+moment.utc($(".last_login").attr("id")).fromNow())}};$(document).ready(function(){updateChatTimes();setInterval(updateChatTimes,60000);setTimeout(function(){$.ajax({type:"GET",data:{profile_id:$(".profile_name").attr("id")},url:"//mutualcog.com/profile/profilevisit",success:function(){return true},error:function(){}})},15000);$(".chat_mssg").click(function(){window.location.href="//mutualcog.com/chat/open/"+$(".chat_id_"+$(this).attr("id")).attr("id")})});$(".big_upvote").click(function(c){c.stopPropagation();var b=$(this).attr("id");var d=$(this).attr("id").replace("upvote_","");var a="//mutualcog.com/chat/upvote";$.ajax({type:"POST",data:{id:d},url:a,success:function(e){if(e.status==1||e.status==3){$("#votes_"+d).text(e.upvotes);$("#upvote_"+d).css("color","#57bf4b");$("#downvote_"+d).css("color","")}else{if(e.status==2){$("#votes_"+d).text(e.upvotes);$("#upvote_"+d).css("color","");$("#downvote_"+d).css("color","")}else{$("#"+b).tooltip("show")}}},error:function(){}})});$(".big_downvote").click(function(b){b.stopPropagation();var d=$(this).attr("id");var c=$(this).attr("id").replace("downvote_","");var a="//mutualcog.com/chat/downvote";$.ajax({type:"POST",data:{id:c},url:a,success:function(e){if(e.status==1||e.status==3){$("#votes_"+c).text(e.upvotes);$("#downvote_"+c).css("color","red");$("#upvote_"+c).css("color","")}else{if(e.status==2){$("#votes_"+c).text(e.upvotes);$("#upvote_"+c).css("color","");$("#downvote_"+c).css("color","")}else{$("#"+d).tooltip("show")}}},error:function(){}})});$("#tag_dropdown").on("click",function(a){a.stopPropagation()});$("#search_input").on("focus",function(a){a.stopPropagation();if($("#search_input").val()==""){$("#tag_dropdown").html("")}$(this).dropdown();$("#tag_dropdown").show()});$(window).on("click",function(a){$("#tag_dropdown").hide()});var selected_term=-1;$("#search_input").on("keydown",function(a){if(a.keyCode==13){if(selected_term==-1){}else{location.assign($("li#search_"+selected_term).children("a").attr("href"))}return false}else{if(a.keyCode==38){if(selected_term!=0){selected_term--;$(".tag_results").css("background-color","");$("li#search_"+selected_term).css("background-color","#f5f5f5")}return false}else{if(a.keyCode==40){if(selected_term!=$("#tag_dropdown").length){selected_term++;$(".tag_results").css("background-color","");$("li#search_"+selected_term).css("background-color","#f5f5f5")}return false}}}});$("#search_input").on("keyup",function(b){var a=$(this).val();if(b.keyCode==13){return false}else{if(b.keyCode==38||b.keyCode==40){}else{if(a.length>2){$.ajax({type:"GET",data:{tag:a},url:"//mutualcog.com/tags/similar-tag",success:function(d){var c="";$.each(d,function(e,f){c+='<li id="search_'+e+'" class="tag_results"><a href="//mutualcog.com/tags/tag/'+f.name+'">'+f.name+"</a></li>"});if(c){$("#tag_dropdown").show();if($("#tag_dropdown").html()!=c){$("#tag_dropdown").html(c);selected_term=-1}}else{$("#tag_dropdown").hide();selected_term=-1}},error:function(){}})}else{$("#tag_dropdown").html("")}}}});