var selected_tag=-1;updateChatTimes=function(){$.each($(".chat_time"),function(a,b){$(this).text(moment.utc($(this).attr("id")).fromNow())});if($(".last_login").length){$(".last_login").html("<b>Last login: </b>"+moment.utc($(".last_login").attr("id")).fromNow())}};$(document).ready(function(){updateChatTimes();setInterval(updateChatTimes,60000)});$("#login_form").submit(function(){var d=1;var e=$("#username").val();var c=$("#pass").val();var a=$("#pass2").val();$(".form-group").attr("class","form-group");if(e.length<3||e.length>20){$("#user_group").attr("class","form-group has-error");$("#username").attr("data-original-title","Username must be longer than 2 characters but less than 15");$("#username").tooltip("show");d=0}else{if(a!=""){var b=$.ajax({type:"GET",data:{username:e},url:"//mutualcog.com/profile/checkuser",async:false,}).responseText;if(b==1){var b=$.ajax({type:"GET",data:{username:e},url:"//mutualcog.com/profile/checkalpha",async:false,}).responseText;if(b==1){}else{$("#user_group").attr("class","form-group has-error");$("#username").attr("data-original-title","Your username must contain at least one character");$("#username").tooltip("show");d=0}}else{$("#user_group").attr("class","form-group has-error");$("#username").attr("data-original-title","That username already exists");$("#username").tooltip("show");d=0}}else{var b=$.ajax({type:"GET",data:{username:e,pass:c},url:"//mutualcog.com/profile/checkcredentials",async:false,}).responseText;console.log(b);if(b==1){}else{$("#user_group").attr("class","form-group has-error");$("#pass1_group").attr("class","form-group has-error");$("#username").attr("data-original-title","Your username or password is incorrect");$("#username").tooltip("show");d=0}}}if(c.length<6||c.length>30){$("#pass1_group").attr("class","form-group has-error");$("#pass2_group").attr("class","form-group has-error");$("#pass").tooltip("show");d=0}if(c!=a&&a!=""){$("#pass1_group").attr("class","form-group has-error");$("#pass2_group").attr("class","form-group has-error");$("#pass2").tooltip("show");d=0}if(d){return true}else{return false}});function cookiesEnabled(){var cookieEnabled=navigator.cookieEnabled;if(cookieEnabled===false){return false}if(!document.cookie&&(cookieEnabled===null||
/*@cc_on!@*/
false)){document.cookie="testcookie=1";if(!document.cookie){return false}else{document.cookie="testcookie=; expires="+new Date(0).toUTCString()}}return true}$("#home_form").submit(function(){if(cookiesEnabled()){var b=1;var c=$("#Title").val();var a=$("#Tags").val();$(".form_error").hide();$(".form-group").attr("class","form-group");if(c.length<3||c.length>180){$("#Title").attr("data-original-title","Title must be longer than 2 characters but less than 180");$("#Title").tooltip("show");$("#title_group").attr("class","form-group has-error");b=0}if(a.split(" ")[0]==""||a.split(" ").length>5){$("#tags_group").attr("class","form-group has-error");$("#Tags").attr("data-original-title","Must have at least 1 tag but less than 6");$("#Tags").tooltip({placement:"left",trigger:"focus"});$("#Tags").tooltip("show");b=0}else{a=a.split(" ");$.each(a,function(d,e){e=e.substr(1);if((e.length<3||e.length>19)&&e.length!=0){$("#tags_group").attr("class","form-group has-error");$("#Tags").attr("data-original-title","Tags must be longer than 2 characters but less than 20");$("#Tags").tooltip({placement:"left",trigger:"focus"});$("#Tags").tooltip("show");b=0;return false}})}if(b){$("#home_form").append('<input type="hidden" name="js_key" val="js_enabled" id="js_key">');return true}else{return false}}else{$("#Title").attr("data-original-title","You must enable cookies to post chats");$("#Title").tooltip("show");return false}});$(".big_upvote").click(function(c){c.stopPropagation();var b=$(this).attr("id");var d=$(this).attr("id").replace("upvote_","");var a="//mutualcog.com/chat/upvote";$.ajax({type:"POST",data:{id:d},url:a,success:function(e){if(e.status==1||e.status==3){$("#votes_"+d).text(e.upvotes);$("#upvote_"+d).css("color","#57bf4b");$("#downvote_"+d).css("color","")}else{if(e.status==2){$("#votes_"+d).text(e.upvotes);$("#upvote_"+d).css("color","");$("#downvote_"+d).css("color","")}else{$("#"+b).tooltip("show")}}},error:function(){}})});$(".big_downvote").click(function(b){b.stopPropagation();var d=$(this).attr("id");var c=$(this).attr("id").replace("downvote_","");var a="//mutualcog.com/chat/downvote";$.ajax({type:"POST",data:{id:c},url:a,success:function(e){if(e.status==1||e.status==3){$("#votes_"+c).text(e.upvotes);$("#downvote_"+c).css("color","red");$("#upvote_"+c).css("color","")}else{if(e.status==2){$("#votes_"+c).text(e.upvotes);$("#upvote_"+c).css("color","");$("#downvote_"+c).css("color","")}else{$("#"+d).tooltip("show")}}},error:function(){}})});$("#tag_dropdown").on("click",function(a){a.stopPropagation()});$("#search_input").on("focus",function(a){a.stopPropagation();if($("#search_input").val()==""){$("#tag_dropdown").html("")}$(this).dropdown();$("#tag_dropdown").show()});$(window).on("click",function(a){$("#tag_dropdown").hide()});var selected_term=-1;$("#search_input").on("keydown",function(a){if(a.keyCode==13){if(selected_term==-1){}else{location.assign($("li#search_"+selected_term).children("a").attr("href"))}return false}else{if(a.keyCode==38){if(selected_term!=0){selected_term--;$(".tag_results").css("background-color","");$("li#search_"+selected_term).css("background-color","#f5f5f5")}return false}else{if(a.keyCode==40){if(selected_term!=$("#tag_dropdown").length){selected_term++;$(".tag_results").css("background-color","");$("li#search_"+selected_term).css("background-color","#f5f5f5")}return false}}}});$("#search_input").on("keyup",function(b){var a=$(this).val();if(b.keyCode==13){return false}else{if(b.keyCode==38||b.keyCode==40){}else{if(a.length>2){$.ajax({type:"GET",data:{tag:a},url:"//mutualcog.com/tags/similar-tag",success:function(d){var c="";$.each(d,function(e,f){c+='<li id="search_'+e+'" class="tag_results"><a href="//mutualcog.com/tags/tag/'+f.name+'">'+f.name+"</a></li>"});if(c){$("#tag_dropdown").show();if($("#tag_dropdown").html()!=c){$("#tag_dropdown").html(c);selected_term=-1}}else{$("#tag_dropdown").hide();selected_term=-1}},error:function(){}})}else{$("#tag_dropdown").html("")}}}});$("#Tags").on("keydown",function(b){if(b.keyCode==13){if(selected_tag!=-1){var a=$("#Tags").val().split(" ");a.pop();a.push("#"+$(".suggested_tags").eq(selected_tag).text());$("#Tags").val(a.join(" ")+" #");$("#Tags").focus();return false}return false}else{if(b.keyCode==38){if($(".popover").length!=0){if(selected_tag!=0){selected_tag-=1;$(".suggested_tags").css("color","");$(".suggested_tags").eq(selected_tag).css("color","#57bf4b")}else{selected_tag=-1;$(".suggested_tags").css("color","")}return false}}else{if(b.keyCode==40){if($(".popover").length!=0){if(selected_tag!=$(".suggested_tags").length-1){selected_tag+=1;$(".suggested_tags").css("color","");$(".suggested_tags").eq(selected_tag).css("color","#57bf4b")}return false}}}}});$("#Tags").on("keyup",function(c){if(c.keyCode==32){if($(this).val().length==1){$(this).val("")}else{var b=$(this).val().split(" ");var a=new Array();$.each(b,function(e,f){f=f.replace("#","");a.push("#"+f)});$(this).val(a.join(" "));$(this).popover("destroy");selected_tag=-1}}else{if(c.keyCode==38||c.keyCode==40){}else{var d=$(this).val().split(" ");d=d.pop().replace("#","");if(d.length>2){$.ajax({type:"GET",data:{tag:d.slice(0,-1)},url:"//mutualcog.com/tags/similar-tag",success:function(f){var e="";$.each(f,function(g,h){e+='<div class="suggested_tags" id="'+h.id+'">'+h.name+"</div>"});if($(".popover").length==0){if(e){$("#Tags").popover({html:true});$("#Tags").attr("data-content",e);$("#Tags").popover("show");$(".suggested_tags").click(function(){var g=$("#Tags").val().split(" ");g.pop();g.push("#"+$(this).text());$("#Tags").val(g.join(" ")+" #");$("#Tags").focus();$("#Tags").popover("destroy");selected_tag=-1});selected_tag=-1}}else{if(e){if($(".popover-content").html()!=e){$(".popover-content").html(e);selected_tag=-1;$(".suggested_tags").off("click");$(".suggested_tags").click(function(){var g=$("#Tags").val().split(" ");g.pop();g.push("#"+$(this).text());$("#Tags").val(g.join(" ")+" #");$("#Tags").focus();$("#Tags").popover("destroy");selected_tag=-1})}}else{$("#Tags").popover("destroy");selected_tag=-1}}},error:function(){}})}else{$(this).popover("destroy");selected_tag=-1}}}});